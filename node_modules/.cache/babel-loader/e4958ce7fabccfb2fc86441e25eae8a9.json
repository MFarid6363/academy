{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Farid\\\\Desktop\\\\DERSLER\\\\dopolnitelnoe\\\\frontend\\\\js (react)\\\\reactproj\\\\routing--assignment-problem\\\\src\\\\components\\\\Coursevideo\\\\CourseAddVideo\\\\AddVideo.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Spinner from '../../spinner/spinner';\nimport ReactPlayer from \"react-player\";\nimport { BiCheckCircle } from \"react-icons/bi\";\n\nvar AddVideo = /*#__PURE__*/function (_Component) {\n  _inherits(AddVideo, _Component);\n\n  function AddVideo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddVideo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddVideo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      spinner: false,\n      VideoData: {\n        Title: {\n          value: '',\n          validation: {\n            requeried: true,\n            minLength: 3,\n            maxLength: 100\n          },\n          valid: false,\n          touched: false\n        },\n        Link: {\n          value: '',\n          validation: {\n            requeried: true,\n            minLength: 1,\n            maxLength: 10000,\n            url: true\n          },\n          valid: false,\n          touched: false\n        }\n      },\n      FormValidity: false,\n      accountData: _this.props.accountData,\n      submitVideo: false\n    };\n\n    _this.submitVideo = function (event) {\n      _this.setState({\n        spinner: true\n      });\n\n      event.preventDefault();\n      var data = {\n        Login: _this.state.accountData.Login,\n        Name: _this.state.accountData.Name + ' ' + _this.state.accountData.Surname,\n        Gender: _this.state.accountData.Gender,\n        Title: _this.state.VideoData.Title.value,\n        Link: _this.state.VideoData.Link.value\n      };\n      axios.post('https://academy-4a97f.firebaseio.com/courses/' + _this.props.course + '/video.json', data).then(function () {\n        _this.cleanState();\n      });\n\n      _this.setState({\n        spinner: false,\n        submitVideo: true\n      });\n    };\n\n    _this.changeHandler = function (event) {\n      _this.setState({\n        submitVideo: false\n      });\n\n      var updated = _objectSpread({}, _this.state.VideoData);\n\n      var updatedFormElement = _objectSpread({}, updated[event.target.id]);\n\n      updatedFormElement.value = event.target.value;\n      updatedFormElement.valid = _this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n      updatedFormElement.touched = true;\n      updated[event.target.id].value = updatedFormElement.value;\n      updated[event.target.id].valid = updatedFormElement.valid;\n      var formIsValid = true;\n\n      for (var inputId in updated) {\n        formIsValid = updated[inputId].valid && formIsValid;\n      }\n\n      _this.setState({\n        registerData: updated,\n        FormValidity: formIsValid\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddVideo, [{\n    key: \"validURL\",\n    value: function validURL(str) {\n      var pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n      '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\n\n      return !!pattern.test(str);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('https://academy-4a97f.firebaseio.com/accounts.json').then(function (response) {\n        for (var element in response.data) {\n          var account = _objectSpread({}, _this2.state.accountData);\n\n          if (_this2.state.accountData.Login === response.data[element].Login) {\n            account.image = response.data[element].image;\n\n            _this2.setState({\n              accountData: account\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"cleanState\",\n    value: function cleanState() {\n      for (var element in this.state.VideoData) {\n        var updated = _objectSpread({}, this.state.VideoData);\n\n        updated[element].valid = false;\n        updated[element].value = '';\n        this.setState({\n          VideoData: updated,\n          FormValidity: false\n        });\n      }\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(value, rules) {\n      var isValid = true;\n\n      if (rules.requeried) {\n        isValid = value.trim() !== '' && isValid;\n      }\n\n      if (rules.minLength) {\n        isValid = value.length >= rules.minLength && isValid;\n      }\n\n      if (rules.maxLength) {\n        isValid = value.length <= rules.maxLength && isValid;\n      }\n\n      if (rules.url) {\n        isValid = this.validURL(value) && isValid;\n      }\n\n      return isValid;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this,\n          _React$createElement,\n          _React$createElement2;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"AddNews\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }, this.state.spinner ? /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 38\n        }\n      }) : /*#__PURE__*/React.createElement(\"form\", {\n        className: \"AddNews__Form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"Title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 29\n        }\n      }, \"Title\"), /*#__PURE__*/React.createElement(\"textarea\", (_React$createElement = {\n        id: \"Title\",\n        value: this.state.VideoData.Title.value,\n        onChange: function onChange(event) {\n          return _this3.changeHandler(event);\n        }\n      }, _defineProperty(_React$createElement, \"id\", \"Title\"), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }), _React$createElement)), /*#__PURE__*/React.createElement(\"label\", {\n        className: this.state.VideoData.Title.valid ? 'Form__validmessage' : 'Form__invalidmessage',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      }, \"Title should be minimum 5 letters\")), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"Link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 29\n        }\n      }, \"Link for video\"), /*#__PURE__*/React.createElement(\"textarea\", (_React$createElement2 = {\n        id: \"Link\",\n        value: this.state.VideoData.Link.value,\n        onChange: function onChange(event) {\n          return _this3.changeHandler(event);\n        }\n      }, _defineProperty(_React$createElement2, \"id\", \"Link\"), _defineProperty(_React$createElement2, \"__self\", this), _defineProperty(_React$createElement2, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 29\n      }), _React$createElement2)), /*#__PURE__*/React.createElement(\"label\", {\n        className: this.state.VideoData.Link.valid ? 'Form__validmessage' : 'Form__invalidmessage',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 29\n        }\n      }, \"Not valid Link\"))), /*#__PURE__*/React.createElement(\"button\", {\n        disabled: !this.state.FormValidity,\n        onClick: function onClick(event) {\n          return _this3.submitNews(event);\n        },\n        className: \"AddNews__Button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, \"Publish video\"), this.state.submitVideo ? /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"SubmitedMessage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 47\n        }\n      }, \"Video published \", /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 95\n        }\n      }, /*#__PURE__*/React.createElement(BiCheckCircle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 98\n        }\n      }))) : null));\n    }\n  }]);\n\n  return AddVideo;\n}(Component);\n\nexport default AddVideo;","map":{"version":3,"sources":["C:/Users/Farid/Desktop/DERSLER/dopolnitelnoe/frontend/js (react)/reactproj/routing--assignment-problem/src/components/Coursevideo/CourseAddVideo/AddVideo.js"],"names":["React","Component","axios","Spinner","ReactPlayer","BiCheckCircle","AddVideo","state","spinner","VideoData","Title","value","validation","requeried","minLength","maxLength","valid","touched","Link","url","FormValidity","accountData","props","submitVideo","event","setState","preventDefault","data","Login","Name","Surname","Gender","post","course","then","cleanState","changeHandler","updated","updatedFormElement","target","id","checkValidity","formIsValid","inputId","registerData","str","pattern","RegExp","test","get","response","element","account","image","rules","isValid","trim","length","validURL","submitNews"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios'\r\nimport Spinner from '../../spinner/spinner'\r\nimport ReactPlayer from \"react-player\";\r\nimport {BiCheckCircle}  from \"react-icons/bi\";\r\n\r\nclass AddVideo extends Component {\r\n    state={\r\n        spinner:false,\r\n        VideoData:{\r\n            Title:{\r\n                value:'',\r\n                validation:{\r\n                    requeried:true,\r\n                    minLength:3,\r\n                    maxLength:100\r\n                    },\r\n                valid:false,\r\n                touched:false,\r\n            },\r\n            Link:{\r\n                value:'',\r\n                validation:{\r\n                    requeried:true,\r\n                    minLength:1,\r\n                    maxLength:10000,\r\n                    url:true\r\n                    },\r\n                valid:false,\r\n                touched:false,\r\n            },\r\n            \r\n        },\r\n        FormValidity:false,\r\n        accountData:this.props.accountData,\r\n        submitVideo:false\r\n    }\r\n    validURL(str) {\r\n        var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\r\n          '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\r\n          '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\r\n          '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\r\n          '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\r\n          '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\r\n        return !!pattern.test(str);\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.get('https://academy-4a97f.firebaseio.com/accounts.json').then((response)=>{\r\n            for(let element in response.data){\r\n                let account={\r\n                    ...this.state.accountData\r\n                }\r\n                if(this.state.accountData.Login===response.data[element].Login){\r\n                    account.image=response.data[element].image\r\n                    this.setState({accountData:account})\r\n                }\r\n            }\r\n        })\r\n    }\r\n    submitVideo=(event)=>{\r\n        this.setState({spinner:true})\r\n        event.preventDefault()\r\n        let data={\r\n            Login:this.state.accountData.Login,\r\n            Name:this.state.accountData.Name + ' ' + this.state.accountData.Surname,\r\n            Gender:this.state.accountData.Gender,\r\n            Title:this.state.VideoData.Title.value,\r\n            Link:this.state.VideoData.Link.value\r\n        }\r\n        axios.post('https://academy-4a97f.firebaseio.com/courses/'+this.props.course+'/video.json',data).then(()=>{\r\n            this.cleanState()\r\n        })     \r\n        this.setState({spinner:false,submitVideo:true}) \r\n    }\r\n    cleanState(){\r\n        for (let element in this.state.VideoData){\r\n            const updated = {\r\n                ...this.state.VideoData\r\n            } \r\n            updated[element].valid = false\r\n            updated[element].value = ''                                          \r\n            this.setState({VideoData:updated,FormValidity:false})\r\n        }\r\n\r\n    }\r\n    checkValidity(value,rules){\r\n        let isValid=true;\r\n        if(rules.requeried){\r\n            isValid=value.trim() !=='' && isValid\r\n        }\r\n        if(rules.minLength){\r\n            isValid=value.length>=rules.minLength && isValid\r\n        }\r\n        if(rules.maxLength){\r\n            isValid=value.length <= rules.maxLength && isValid\r\n        }\r\n        if(rules.url){\r\n            isValid=this.validURL(value) && isValid \r\n        }\r\n        return isValid\r\n    }\r\n    changeHandler=(event)=>{\r\n        this.setState({submitVideo:false})\r\n        const updated={\r\n            ...this.state.VideoData\r\n        }\r\n        let updatedFormElement={\r\n            ...updated[event.target.id]\r\n        }\r\n        updatedFormElement.value=event.target.value\r\n        updatedFormElement.valid=this.checkValidity(updatedFormElement.value,updatedFormElement.validation)\r\n        updatedFormElement.touched=true\r\n        updated[event.target.id].value=updatedFormElement.value\r\n        updated[event.target.id].valid=updatedFormElement.valid\r\n        let formIsValid=true\r\n        for(let inputId in updated){\r\n            formIsValid = updated[inputId].valid && formIsValid\r\n        }\r\n        this.setState({registerData:updated,FormValidity:formIsValid})  \r\n    }\r\n    render() {\r\n        return (\r\n            <div className='AddNews'>\r\n                {\r\n                this.state.spinner ? <Spinner/>:\r\n                <form className='AddNews__Form'>\r\n                    <ul>\r\n                        <li>\r\n                            <label htmlFor='Title'>Title</label>\r\n                            <textarea id='Title' value={this.state.VideoData.Title.value} onChange={(event)=>this.changeHandler(event)} id='Title'/>\r\n                            <label className={this.state.VideoData.Title.valid ? 'Form__validmessage' :'Form__invalidmessage'}>Title should be minimum 5 letters</label>\r\n                        </li>\r\n                        <li>\r\n                            <label  htmlFor='Link'>Link for video</label>\r\n                            <textarea id='Link' value={this.state.VideoData.Link.value} onChange={(event)=>this.changeHandler(event)} id='Link'/> \r\n                            <label className={this.state.VideoData.Link.valid ? 'Form__validmessage' :'Form__invalidmessage'}>Not valid Link</label>\r\n                        </li>\r\n                    </ul>\r\n                    <button disabled={!this.state.FormValidity} onClick={(event)=>this.submitNews(event)} className='AddNews__Button'>Publish video</button>\r\n                    {this.state.submitVideo ? <h2 className='SubmitedMessage'>Video published <i><BiCheckCircle/></i></h2>: null}\r\n                </form>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddVideo;"]},"metadata":{},"sourceType":"module"}